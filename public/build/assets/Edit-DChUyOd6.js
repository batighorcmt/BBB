import{u as I,c as _,b as v,d as p,h as P,w,e as t,z as q,j as f,t as l,g as r,A as C,k as i,f as m,F as k,l as F,s as T,q as $}from"./app-BGripyAl.js";import{_ as j}from"./AuthenticatedLayout-u-dhrov9.js";const E={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},W={class:"py-12"},A={class:"w-full mx-auto sm:px-6 lg:px-8"},N={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},S={class:"p-6 text-gray-900 dark:text-gray-100"},D={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-6 flex flex-wrap gap-6 text-sm"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},B={class:"overflow-x-auto mb-8"},L={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 border"},M={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200"},Q={class:"px-2 py-2 text-sm"},R={class:"px-2 py-2"},O=["onUpdate:modelValue","onInput"],G={class:"px-2 py-2"},H=["onUpdate:modelValue","onInput"],J={class:"px-2 py-2"},K=["onUpdate:modelValue","onInput"],X={class:"px-2 py-2"},Y=["onUpdate:modelValue","onInput"],Z={class:"px-2 py-2"},tt=["onUpdate:modelValue","onInput"],et={class:"px-2 py-2"},ot=["onUpdate:modelValue","onInput"],st={class:"px-2 py-2"},at=["onUpdate:modelValue","onInput"],dt={class:"px-2 py-2 font-bold bg-gray-50 dark:bg-gray-900 text-right text-sm"},nt={class:"px-2 py-2 font-bold bg-gray-50 dark:bg-gray-900 text-right text-sm"},lt={class:"mb-8"},rt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 border border-red-200"},pt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200"},ut={class:"px-4 py-2 text-sm"},ct={class:"px-4 py-2"},xt=["onUpdate:modelValue"],gt={class:"px-4 py-2"},_t=["onUpdate:modelValue"],mt={class:"flex justify-end"},yt={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-lg w-full md:w-1/3"},bt={class:"flex justify-between items-center mb-2"},ft={class:"font-bold text-lg"},ht={class:"flex justify-between items-center mb-2 border-b pb-2"},vt={class:"font-bold text-green-600"},wt={class:"flex justify-between items-center pt-2"},kt={class:"text-xl font-bold text-indigo-600"},Ft={class:"mt-8 flex justify-end space-x-3"},Vt=["disabled"],Pt={__name:"Edit",props:{production:Object},setup(g){const x=g,d=I({status:x.production.status,total_cost:x.production.total_cost,note:x.production.note||"",items:x.production.items.map(a=>({id:a.id,quotation_item_id:a.quotation_item_id,product_name:a.product_name,size:a.size,quantity:parseFloat(a.quantity),envelope_weight:parseFloat(a.envelope_weight),envelope_price:parseFloat(a.envelope_price),loop_weight:parseFloat(a.loop_weight),loop_price:parseFloat(a.loop_price),print_cost:parseFloat(a.print_cost),sewing_cost:parseFloat(a.sewing_cost),price_per_piece:parseFloat(a.price_per_piece),total_price:parseFloat(a.total_price),wastage_kg:parseFloat(a.wastage_kg),wastage_piece:parseFloat(a.wastage_piece)}))}),u=a=>{const e=d.items[a],c=parseFloat(e.quantity)||0;if(c<=0){e.price_per_piece=0,e.total_price=0;return}const y=(parseFloat(e.envelope_weight)||0)*(parseFloat(e.envelope_price)||0),b=(parseFloat(e.loop_weight)||0)*(parseFloat(e.loop_price)||0),o=(parseFloat(e.print_cost)||0)*c,n=(parseFloat(e.sewing_cost)||0)*c,s=y+b+o+n;e.price_per_piece=(s/c).toFixed(2),e.total_price=s.toFixed(2),V()},V=()=>{let a=0;d.items.forEach(e=>{a+=parseFloat(e.total_price)||0}),d.total_cost=a.toFixed(2)},h=$(()=>{const a=parseFloat(d.total_cost)||0,e=parseFloat(x.production.advance_amount)||0;return{total:a.toFixed(2),advance:e.toFixed(2),final:(a-e).toFixed(2)}}),U=()=>{d.put(route("production.update",x.production.id))};return(a,e)=>(m(),_(k,null,[v(p(P),{title:"Edit Production"}),v(j,null,{header:w(()=>[t("h2",E,"Edit Production #"+l(g.production.production_no),1)]),default:w(()=>{var c,y,b;return[t("div",W,[t("div",A,[t("div",N,[t("div",S,[t("form",{onSubmit:q(U,["prevent"])},[t("div",D,[t("div",null,[e[2]||(e[2]=t("span",{class:"font-bold"},"Quotation No:",-1)),f(" "+l((c=g.production.quotation)==null?void 0:c.quotation_no),1)]),t("div",null,[e[3]||(e[3]=t("span",{class:"font-bold"},"Customer:",-1)),f(" "+l((b=(y=g.production.quotation)==null?void 0:y.customer)==null?void 0:b.name),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-bold"},"Advance Amount:",-1)),f(" "+l(g.production.advance_amount),1)])]),t("div",z,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>p(d).status=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...e[5]||(e[5]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"working"},"Working",-1),t("option",{value:"completed"},"Completed (Production Ready)",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],512),[[C,p(d).status]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Note",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>p(d).note=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[i,p(d).note]])])]),t("div",B,[e[9]||(e[9]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Production Items",-1)),t("table",L,[e[8]||(e[8]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Product"),t("th",{class:"px-2 py-2 text-left text-xs font-medium w-16"},"Qty"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Env Wt (kg)"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Env Price"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Loop Wt (kg)"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Loop Price"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Print (pc)"),t("th",{class:"px-2 py-2 text-left text-xs font-medium"},"Sewing (pc)"),t("th",{class:"px-2 py-2 text-left text-xs font-medium bg-gray-700"},"Cost/Pc"),t("th",{class:"px-2 py-2 text-left text-xs font-medium bg-gray-700"},"Total")])],-1)),t("tbody",M,[(m(!0),_(k,null,F(p(d).items,(o,n)=>(m(),_("tr",{key:n},[t("td",Q,l(o.product_name),1),t("td",R,[r(t("input",{"onUpdate:modelValue":s=>o.quantity=s,type:"number",step:"1",class:"w-16 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n),required:""},null,40,O),[[i,o.quantity]])]),t("td",G,[r(t("input",{"onUpdate:modelValue":s=>o.envelope_weight=s,type:"number",step:"0.001",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,H),[[i,o.envelope_weight]])]),t("td",J,[r(t("input",{"onUpdate:modelValue":s=>o.envelope_price=s,type:"number",step:"0.01",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,K),[[i,o.envelope_price]])]),t("td",X,[r(t("input",{"onUpdate:modelValue":s=>o.loop_weight=s,type:"number",step:"0.001",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,Y),[[i,o.loop_weight]])]),t("td",Z,[r(t("input",{"onUpdate:modelValue":s=>o.loop_price=s,type:"number",step:"0.01",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,tt),[[i,o.loop_price]])]),t("td",et,[r(t("input",{"onUpdate:modelValue":s=>o.print_cost=s,type:"number",step:"0.01",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,ot),[[i,o.print_cost]])]),t("td",st,[r(t("input",{"onUpdate:modelValue":s=>o.sewing_cost=s,type:"number",step:"0.01",class:"w-20 rounded-md border-gray-300 text-xs p-1 text-right",onInput:s=>u(n)},null,40,at),[[i,o.sewing_cost]])]),t("td",dt,l(o.price_per_piece),1),t("td",nt,l(o.total_price),1)]))),128))])])]),t("div",lt,[e[11]||(e[11]=t("h3",{class:"text-lg font-medium text-red-600 dark:text-red-400 mb-2"},"Wastage Details",-1)),t("div",rt,[t("table",it,[e[10]||(e[10]=t("thead",{class:"bg-red-50 dark:bg-red-900 text-red-800 dark:text-red-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium"},"Product"),t("th",{class:"px-4 py-2 text-left text-xs font-medium"},"Wastage (kg)"),t("th",{class:"px-4 py-2 text-left text-xs font-medium"},"Wastage (Piece)")])],-1)),t("tbody",pt,[(m(!0),_(k,null,F(p(d).items,(o,n)=>(m(),_("tr",{key:n},[t("td",ut,l(o.product_name),1),t("td",ct,[r(t("input",{"onUpdate:modelValue":s=>o.wastage_kg=s,type:"number",step:"0.001",class:"w-32 rounded-md border-red-300 text-sm p-1"},null,8,xt),[[i,o.wastage_kg]])]),t("td",gt,[r(t("input",{"onUpdate:modelValue":s=>o.wastage_piece=s,type:"number",step:"1",class:"w-32 rounded-md border-red-300 text-sm p-1"},null,8,_t),[[i,o.wastage_piece]])])]))),128))])])])]),t("div",mt,[t("div",yt,[t("div",bt,[e[12]||(e[12]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Total Production Cost:",-1)),t("span",ft,l(h.value.total),1)]),t("div",ht,[e[13]||(e[13]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Advance Paid:",-1)),t("span",vt,"- "+l(h.value.advance),1)]),t("div",wt,[e[14]||(e[14]=t("span",{class:"text-xl font-bold text-gray-800 dark:text-white"},"Final / Due Amount:",-1)),t("span",kt,l(h.value.final),1)])])]),t("div",Ft,[v(p(T),{href:a.route("production.index"),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300"},{default:w(()=>[...e[15]||(e[15]=[f("Cancel",-1)])]),_:1},8,["href"]),t("button",{type:"submit",class:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded shadow-lg",disabled:p(d).processing}," Update Production ",8,Vt)])],32)])])])])]}),_:1})],64))}};export{Pt as default};
