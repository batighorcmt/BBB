import{r as u,c as a,b as w,d as I,h as R,w as b,e as t,g as v,k as _,t as n,f as s,F as x,l as g,n as V,i as y,m as D,p as N,q as z}from"./app-CnXs59Mg.js";import{_ as A}from"./AuthenticatedLayout-CkDm_uGO.js";const B={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow mb-6 no-print"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},H={class:"flex space-x-2"},S={class:"bg-white dark:bg-gray-800 shadow sm:rounded-lg overflow-hidden"},T={class:"p-6 border-b border-gray-200 dark:border-gray-700 print-header"},U={class:"text-center text-gray-500 mt-1"},q={class:"overflow-x-auto"},O={key:0,class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-xs"},E={class:"bg-gray-50 dark:bg-gray-700"},W={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700 uppercase"},G={class:"px-2 py-2 whitespace-nowrap dark:text-gray-300 font-bold sticky left-0 bg-white dark:bg-gray-800 z-10 border-r"},J={key:1,class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 font-medium"},X={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 font-medium"},Y={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 text-center font-mono text-green-600 font-bold"},Z={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 text-center font-mono text-red-600 font-bold"},tt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 text-center font-bold"},et={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 text-center space-x-2 no-print"},rt=["href"],at={key:1,class:"text-gray-400"},st=["href"],ot={key:3,class:"text-gray-400"},nt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-300 text-center space-x-3 no-print"},dt=["onClick"],lt=["onClick"],it={key:0},ct={class:"p-4 border-b dark:border-gray-700 flex justify-between items-center"},xt={class:"p-2"},pt=["src"],yt={__name:"Report",props:{attendances:Array,matrix:Array,daysInMonth:Number,filters:Object},setup(i){const h=i,c=u(h.filters.date||""),d=u(h.filters.month||""),p=u(!1),k=u(""),C=z(()=>{var o;return!!d.value&&((o=h.matrix)==null?void 0:o.length)>0}),m=()=>{N.get(route("attendance.reports"),{date:c.value,month:d.value},{preserveState:!0})},M=()=>{window.print()},f=o=>{o&&(k.value="/storage/"+o,p.value=!0)},$=o=>o||"--:--:--",L=o=>{if(o==null||o==="")return"-";const e=Math.abs(parseInt(o))||0;if(e===0)return"0h 0m";const r=Math.floor(e/60),l=e%60;return`${r}h ${l}m`};return(o,e)=>(s(),a(x,null,[w(I(R),{title:"Attendance Reports"}),w(A,null,{header:b(()=>[t("div",{class:"flex justify-between items-center no-print"},[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Attendance Reports ",-1)),t("button",{onClick:M,class:"bg-gray-800 text-white px-4 py-2 rounded shadow hover:bg-gray-900"}," Print Report ")])]),default:b(()=>[t("div",B,[t("div",P,[t("div",j,[t("div",F,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Daily Report",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,c.value]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Monthly Report",-1)),v(t("input",{type:"month","onUpdate:modelValue":e[1]||(e[1]=r=>d.value=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,d.value]])]),t("div",H,[t("button",{onClick:m,class:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"},"Filter"),t("button",{onClick:e[2]||(e[2]=r=>{c.value="",d.value="",m()}),class:"text-gray-600 hover:text-gray-900"},"Reset")])])]),t("div",S,[t("div",T,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-center dark:text-white"},"হাজিরা রিপোর্ট",-1)),t("p",U,n(c.value?"তারিখ: "+c.value:d.value?"মাস: "+d.value:"সকল রিপোর্ট"),1)]),t("div",q,[C.value?(s(),a("table",O,[t("thead",E,[t("tr",null,[e[10]||(e[10]=t("th",{class:"px-2 py-2 text-left font-medium text-gray-500 dark:text-gray-300 uppercase sticky left-0 bg-gray-50 dark:bg-gray-700 z-10"},"Employee",-1)),(s(!0),a(x,null,g(i.daysInMonth,r=>(s(),a("th",{key:r,class:"px-1 py-2 text-center font-medium text-gray-500 dark:text-gray-300"},n(r),1))),128))])]),t("tbody",W,[(s(!0),a(x,null,g(i.matrix,r=>(s(),a("tr",{key:r.employee.id},[t("td",G,n(r.employee.name),1),(s(!0),a(x,null,g(i.daysInMonth,l=>(s(),a("td",{key:l,class:V(["px-1 py-2 text-center border-r last:border-0",r.days[l].status==="P"?"text-green-600 font-bold":"text-red-400 opacity-50"])},n(r.days[l].status),3))),128))]))),128))])])):(s(),a("table",J,[e[15]||(e[15]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap"},"Staff Name (Code)"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap text-center"},"Check IN"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap text-center"},"Check OUT"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap text-center"},"Work Hours"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap text-center"},"Location"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap text-center"},"Photo")])],-1)),t("tbody",K,[(s(!0),a(x,null,g(i.attendances,r=>(s(),a("tr",{key:r.id},[t("td",Q,n(new Date(r.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),1),t("td",X,n(r.employee.name)+" ("+n(r.employee.employee_code)+") ",1),t("td",Y,n(r.check_in),1),t("td",Z,n($(r.check_out)),1),t("td",tt,n(L(r.work_hours)),1),t("td",et,[r.check_in_latitude?(s(),a("a",{key:0,href:`https://www.google.com/maps?q=${r.check_in_latitude},${r.check_in_longitude}`,target:"_blank",class:"text-blue-500 text-xs hover:underline"}," IN Link ",8,rt)):(s(),a("span",at,"-")),e[11]||(e[11]=t("span",{class:"text-gray-300"},"|",-1)),r.check_out_latitude?(s(),a("a",{key:2,href:`https://www.google.com/maps?q=${r.check_out_latitude},${r.check_out_longitude}`,target:"_blank",class:"text-red-500 text-xs hover:underline"}," OUT Link ",8,st)):(s(),a("span",ot,"-"))]),t("td",nt,[r.check_in_photo?(s(),a("button",{key:0,onClick:l=>f(r.check_in_photo),class:"text-blue-500 hover:text-blue-700"},[...e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],8,dt)):y("",!0),r.check_out_photo?(s(),a("button",{key:1,onClick:l=>f(r.check_out_photo),class:"text-red-500 hover:text-red-700"},[...e[13]||(e[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],8,lt)):y("",!0)])]))),128)),i.attendances.length===0?(s(),a("tr",it,[...e[14]||(e[14]=[t("td",{colspan:"7",class:"px-6 py-10 text-center text-gray-500 dark:text-gray-400"},"কোনো হাজিরা পাওয়া যায়নি।",-1)])])):y("",!0)])]))])])])]),p.value?(s(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-75 no-print",onClick:e[5]||(e[5]=r=>p.value=!1)},[t("div",{class:"relative bg-white dark:bg-gray-800 rounded-lg max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl",onClick:e[4]||(e[4]=D(()=>{},["stop"]))},[t("div",ct,[e[16]||(e[16]=t("h3",{class:"font-bold dark:text-white"},"Attendance Photo",-1)),t("button",{onClick:e[3]||(e[3]=r=>p.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 font-bold"},"Close")]),t("div",xt,[t("img",{src:k.value,class:"max-w-full h-auto rounded mx-auto",alt:"Attendance Photo"},null,8,pt)])])])):y("",!0)]),_:1})],64))}};export{yt as default};
